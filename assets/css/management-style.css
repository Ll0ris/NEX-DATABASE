/* Management Hierarchy - Top-down Org Tree */
.management-header { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.management-actions .assign-member-btn { background: var(--primary-color); color:#fff; border:none; border-radius:8px; padding:8px 12px; display:inline-flex; align-items:center; gap:6px; cursor:pointer; }
.management-actions .assign-member-btn:hover { transform: translateY(-1px); }

.management-hierarchy { position: relative; display:flex; flex-direction:column; gap:32px; }

/* Tiers become lightweight rows with vertical connectors between them */
.tier { position: relative; padding: 0; border: 0; background: transparent; box-shadow: none; }
.tier-header { display:flex; align-items:center; justify-content:space-between; margin: 0 0 8px 0; }
.tier-title { color: var(--primary-color); font-weight:700; }
.tier-count { color: var(--text-secondary); font-size:.9rem; }

/* Vertical connector from this tier to the next */
.tier::after { content:''; position:absolute; left:50%; transform:translateX(-50%); bottom:-16px; width:2px; height:16px; background: var(--border-color); opacity:.8; }
.tier:last-child::after { display:none; }
/* Vertical connector coming from previous tier */
.tier:not(:first-child)::before { content:''; position:absolute; left:50%; transform:translateX(-50%); top:-16px; width:2px; height:16px; background: var(--border-color); opacity:.8; }

/* Rows of members with a horizontal branch line on top */
.member-grid { position:relative; display:flex; flex-wrap:wrap; justify-content:center; gap:16px; padding-top:22px; }
.member-grid::before { content:''; position:absolute; left:10%; right:10%; top:10px; height:2px; background: var(--border-color); opacity:.8; }

/* Tier subgroups (Kurullar/Sorumlular) as simple branches, not tables */
.tier-subgroups { display:grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap:18px; margin-top: 2px; }
.subgroup { border:0; background: transparent; padding: 0; }
.subgroup-header { display:flex; align-items:center; justify-content:center; margin: 0 0 6px 0; }
.subgroup-title { font-weight:600; color: var(--text-primary); background: var(--panel-bg); border:1px solid var(--border-color); border-radius:999px; padding:4px 10px; }
.subgroup-count { display:none; }
/* Vertical list of identical role holders */
.subgroup .role-list { list-style: disc; padding-left: 22px; margin: 0; position: relative; list-style: none;}
.subgroup .role-item { margin: 8px 0; }
/* keep branch vibe subtly */
.subgroup .role-list::before { content:''; position:absolute; left:4px; top:0; bottom:0; width:2px; background: var(--border-color); opacity:.4; }

/* Members: framed avatar with inline name + institution */
.member-card { position:relative; cursor:pointer; display:flex; align-items:center; gap:12px; background: transparent; border: 0; border-radius: 12px; padding: 4px; transition: transform .15s ease, box-shadow .15s ease, background .15s ease; }
.member-card:hover { transform: translateY(-2px); background: var(--bg-secondary); box-shadow: 0 6px 20px rgba(0,0,0,.08); }
/* connector from node up to the branch line */
.member-card::before { content:''; position:absolute; top:-12px; left:50%; transform:translateX(-50%); width:2px; height:12px; background: var(--border-color); opacity:.8; }
/* In vertical lists, don't show the small connector */
.subgroup .role-list .member-card::before { display:none; }

/* Hide branch line when there is a single item (supported in modern browsers) */
.member-grid:has(.member-card:nth-child(1):nth-last-child(1))::before,
.subgroup-grid:has(.member-card:nth-child(1):nth-last-child(1))::before { display:none; }

.member-avatar { width: var(--avatar-size, 44px); height: var(--avatar-size, 44px); border-radius: 12px; overflow: hidden; flex-shrink: 0; display:flex; align-items:center; justify-content:center; background: var(--panel-bg); border: 2px solid var(--border-color); box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 35%, transparent); }
.member-avatar img { width:100%; height:100%; object-fit:cover; }
.member-avatar i { color: var(--text-muted); font-size: 20px; }
.member-info { display:flex; flex-direction:column; min-width:0; }
.member-role { font-size:.8rem; color: var(--primary-color); font-weight:600; }
.member-name { font-weight:600; color: var(--text-primary); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.member-institution { color: var(--text-secondary); font-size:.9rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Assign modal (unchanged, minor polish) */
.assign-user-list { max-height: 360px; overflow:auto; border:1px solid var(--border-color); border-radius:8px; padding:6px; margin-top:8px; }
.assign-item { display:flex; align-items:center; gap:10px; padding:8px; border-bottom:1px dashed var(--border-color); cursor:pointer; }
.assign-item:last-child { border-bottom:none; }
.assign-item:hover { background: var(--panel-bg); }
.assign-item .assign-select { margin-left:auto; }

/* Dark theme tweaks */
[data-theme="dark"] .member-card:hover { background: #262626; }
[data-theme="dark"] .member-avatar { background:#1f1f1f; border-color:#3a3a3a; box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 25%, transparent); }

/* Org chart hierarchy scaling */
.tier--president { --avatar-size: 88px; }
.tier--president .member-name { font-size: 1.05rem; }
.tier--president .member-institution { font-size: .95rem; }

.tier--vps { --avatar-size: 68px; }
.tier--boards { --avatar-size: 60px; }
.tier--leads { --avatar-size: 52px; }
.tier--members { --avatar-size: 44px; }

/* Slightly wider branches for boards/leads */
.tier--boards .tier-subgroups,
.tier--leads .tier-subgroups { grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); }

